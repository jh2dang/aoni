# 데바니온 최적화 알고리즘

## 개요

데바니온 최적화 기능은 캐릭터의 데바니온 보드에서 주어진 포인트로 최대 전투력을 얻을 수 있는 노드 구성을 찾아주는 기능입니다.

## 최적화 대상

- **최적화 가능한 보드**: 네자칸, 지켈, 바이젤, 트리니엘 (4개 보드)
- **제외 보드**: 아리엘, 아스펠 (최적화 대상 아님)

## 기본 규칙

### 포인트 비용
- 일반 노드: 1 포인트
- 희귀 노드: 2 포인트
- 유니크 노드: 3 포인트
- 전설 노드: 5 포인트
- 시작 노드: 0 포인트 (이미 활성화됨)

### 전투력 계산
- **포인트 1당 전투력 1** (1:1 비율)
- 노드의 포인트 비용 = 해당 노드의 전투력

### 제약 조건
1. **인접 규칙**: 노드를 활성화하려면 상하좌우 중 하나 이상의 인접 노드가 이미 활성화되어 있어야 함
2. **시작 노드**: 모든 보드의 중앙에 있는 시작 노드에서 시작 (포인트 비용 0)
3. **포인트 제한**: 현재 사용 중인 포인트를 초과할 수 없음

## 최적화 알고리즘

### 알고리즘 유형
**BFS(너비 우선 탐색) 기반 그리디 알고리즘**

### 핵심 로직

1. **현재 상태 분석**
   - 현재 활성화된 노드들의 전투력 합계 계산
   - 현재 사용 중인 포인트 계산
   - 시작 노드는 항상 활성화된 것으로 간주

2. **효율성 계산**
   ```
   효율성 = 전투력 / 포인트 비용
   ```
   - 효율성이 높은 노드를 우선적으로 선택
   - 효율성이 같으면 포인트 비용이 낮은 노드 우선

3. **그리디 탐색 과정**
   - 시작 노드에서 시작
   - 현재 활성화된 노드들의 인접 노드 중에서
   - 효율성이 가장 높고 포인트 예산 내의 노드를 선택
   - 선택된 노드를 활성화하고 큐에 추가
   - 반복하여 최대한 많은 노드 활성화

4. **결과 처리**
   - 최적화된 전투력 계산
   - 최적화 결과가 현재보다 낮으면 현재 구성 유지 (개선값 0)
   - 추가/제거 권장 노드 리스트 생성

## 최적화 결과

### 제공 정보
- **현재 전투력**: 현재 활성화된 노드들의 전투력 합계
- **최적화 후 전투력**: 알고리즘이 찾은 최적 구성의 전투력
- **전투력 향상**: 개선 가능한 전투력 수치
- **추가 권장 노드**: 활성화하면 전투력이 향상되는 노드 목록
- **제거 권장 노드**: 비활성화해도 전투력 손실이 적은 노드 목록

### 보드별 분석
- 각 보드(네자칸, 지켈, 바이젤, 트리니엘)별로 개별 최적화 수행
- 전체 보드의 전투력을 합산하여 종합 결과 제공

## 알고리즘 특징

### 장점
- **빠른 계산**: 그리디 알고리즘으로 실시간 최적화 가능
- **실용적**: 게임 내 제약 조건을 모두 반영
- **직관적**: 효율성 기반으로 이해하기 쉬운 결과 제공

### 한계
- **근사해**: 그리디 알고리즘 특성상 완벽한 최적해를 보장하지 않음
- **로컬 최적해**: 전역 최적해보다는 지역 최적해에 가까움
- **단순화된 가정**: 모든 노드의 전투력이 동일하다고 가정 (1:1 비율)

## 구현 세부사항

### 주요 함수
- `optimizeDaevanion()`: 단일 보드 최적화
- `optimizeAllBoards()`: 여러 보드 통합 최적화
- `getNodePointCost()`: 노드 포인트 비용 계산
- `getNodeCombatPower()`: 노드 전투력 계산
- `isAdjacent()`: 두 노드의 인접 여부 확인

### 최적화 과정
1. 시작 노드 찾기 및 초기화
2. 현재 상태 분석 (전투력, 포인트)
3. 노드를 효율성 순으로 정렬
4. BFS로 인접 노드 탐색 및 효율적인 노드 선택
5. 포인트 예산 내에서 최대한 많은 노드 활성화
6. 결과 검증 및 권장사항 생성

## 사용자 경험

- 캐릭터 상세 페이지에서 "데바니온 최적화하기" 버튼 클릭
- 최적화 페이지에서 전체 보드 분석 결과 확인
- 보드별 상세 분석 및 권장 노드 목록 확인
- 현재 구성과 최적 구성 비교를 통한 개선 방향 제시

